# Проект: HR аналитика

Проект направлен на оптимизацию управления персоналом посредством решения двух задач — предсказания уровня удовлетворенности и предсказания оттока сотрудников.

## Цель проекта

- **Задача 1:** Построить модель, которая сможет предсказать уровень удовлетворённости сотрудника на основе данных заказчика.
- **Задача 2:** Построить модель, которая сможет на основе данных заказчика предсказать, что сотрудник уволится из компании.

---

## Описание данных

### Задача 1: Предсказание уровня удовлетворенности сотрудника  
**Тренировочный файл:** `train_job_satisfaction_rate.csv`  
**Файл тестовых признаков:** `test_features.csv`  
**Файл целевого признака (тест):** `test_target_job_satisfaction_rate.csv`

| Признак                  | Описание                                                                 |
|--------------------------|--------------------------------------------------------------------------|
| `id`                     | Уникальный идентификатор сотрудника                                     |
| `dept`                   | Отдел, в котором работает сотрудник                                     |
| `level`                  | Уровень занимаемой должности                                            |
| `workload`               | Уровень загруженности сотрудника                                        |
| `employment_years`       | Длительность работы в компании (в годах)                                |
| `last_year_promo`        | Было ли повышение за последний год                                      |
| `last_year_violations`   | Нарушал ли сотрудник трудовой договор за последний год                  |
| `supervisor_evaluation`  | Оценка качества работы сотрудника, которую дал руководитель             |
| `salary`                 | Ежемесячная зарплата сотрудника                                         |
| `job_satisfaction_rate`  | Уровень удовлетворённости работой (целевой признак задачи 1)            |

---

### Задача 2: Предсказание увольнения сотрудника  
**Тренировочный файл:** `train_quit.csv`  
**Файл тестовых признаков:** `test_features.csv`  
**Файл целевого признака (тест):** `test_target_quit.csv`

| Признак                  | Описание                                                                 |
|--------------------------|--------------------------------------------------------------------------|
| `id`                     | Уникальный идентификатор сотрудника                                     |
| `dept`                   | Отдел, в котором работает сотрудник                                     |
| `level`                  | Уровень занимаемой должности                                            |
| `workload`               | Уровень загруженности сотрудника                                        |
| `employment_years`       | Длительность работы в компании (в годах)                                |
| `last_year_promo`        | Было ли повышение за последний год                                      |
| `last_year_violations`   | Нарушал ли сотрудник трудовой договор за последний год                  |
| `supervisor_evaluation`  | Оценка качества работы сотрудника, которую дал руководитель             |
| `salary`                 | Ежемесячная зарплата сотрудника                                         |
| `quit`                   | Целевой признак: факт увольнения сотрудника (0 — остался, 1 — уволился) |

---

## Используемые библиотеки

- `pandas`, `numpy` — работа с данными 
- `matplotlib`, `seaborn` — визуализация данных и корреляций  
- `scikit-learn` (`sklearn`) — машинное обучение и построение pipeline  
  - модели: `DecisionTreeRegressor`, `DecisionTreeClassifier`, `LinearRegression`, `KNeighborsClassifier`, `LogisticRegression`
  - инструменты: `Pipeline`, `GridSearchCV`, `train_test_split`, `StandardScaler`, `OneHotEncoder`, `make_column_transformer`
- `shap` — интерпретация моделей

## Задача 1. Предсказание уровня удовлетворенности сотрудника

### Основные выводы:

- Проведена предобработка, удалены дубликаты, упорядочены значения таргета.
- В ходе анализа выявлены следующие закономерности:
    - Уровень удовлетворенности **не зависит линейно** от зарплаты, стажа, загруженности, отдела и уровня.
    - Повышение по службе **влияет положительно** — сотрудники с повышением более удовлетворены.
    - Сотрудники с нарушениями чаще выражают **низкую удовлетворенность**.
    - **Оценка руководителя** прямо влияет на удовлетворённость — при низкой оценке чаще встречается неудовлетворенность.
    - Большинство сотрудников не имели повышения в течение последнего года.
    - Средняя оценка руководителя — 4 из 5.

- Модель обучения:
    - Использована модель `DecisionTreeRegressor(max_depth=14, max_features=14, min_samples_leaf=3, random_state=42)`
    - Целевая метрика: SMAPE = **13.613** на тестовой выборке.
    - Прорабатывались улучшения модели (удаление/добавление признаков) — прироста не дало.

### Рекомендации:

| Закономерность                                                   | Рекомендации                                                                                                              |
|------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------|
| **Оценка руководителя — ключевой фактор удовлетворенности**      | 1. Пересмотреть систему оценки сотрудников.<br>2. Ввести KPI для руководителей, связанные с удовлетворённостью персонала. |
| **Длительный стаж коррелирует с большей удовлетворённостью**     | 1. Ввести менторские программы.<br>2. Организовать поддержку для новых сотрудников.                                       |
| **Зарплата влияет слабо**                                        | 1. Внедрить нематериальные методы мотивации.<br>2. Создать программы признания заслуг.                                    |

---

## Задача 2. Предсказание увольнения сотрудника

### Основные выводы:

- Проведена предобработка, удалены дубликаты, упорядочены значения таргета.
- Проведён EDA и составлен **портрет уволившегося сотрудника**:

    - 51% уволившихся — сотрудники уровня junior.
    - Стаж 1–3 года, низкая загруженность.
    - Низкая оценка от руководителя (на 16% ниже, чем у остающихся).
    - Зарплата — на 37% ниже средней.
    - Стаж — на 58% меньше.
    - Максимальный отток — в HR-отделе.
    - Большинство — без повышения в течение года.
    - 42% уволившихся имели нарушения распорядка.
    - Во всех отделах наибольший отток среди сотрудников с **низкой загруженностью**.

- Добавлен новый признак — **предсказанный уровень удовлетворенности** (из Задачи 1).

- Модель обучения:
    - Выбрана модель `DecisionTreeClassifier(max_depth=5, max_features=9, min_samples_leaf=4, random_state=42)`
    - Целевая метрика: ROC-AUC = **0.93**
    - Лучшая модель — дерево решений, т.к. признаки слабо линейно связаны с целевым признаком. Модель легко интерпретируема.

### Рекомендации:

| Область                          | Проблемы выявлены                                                       | Рекомендации                                                                 |
|----------------------------------|------------------------------------------------------------------------|------------------------------------------------------------------------------|
| **Демография увольнений**        | 51% junior-специалистов увольняются;<br>Стаж 1–3 года;<br>Низкая загрузка | 1. Программы адаптации и менторства<br>2. Карьерные треки для junior-сотрудников |
| **Оценка руководителя**          | Уволившиеся получают оценки ниже на 16%                                | 1. Обучение руководителей<br>2. Учет удовлетворенности команды в KPI        |
| **Зарплата и мотивация**         | Зарплата уволившихся на 37% ниже;<br>Нет связи с загрузкой             | 1. Анализ рыночных зарплат<br>2. Бонусы за стаж и эффективность             |
| **Загрузка сотрудников**         | Низкая загрузка → 45% увольнений                                       | 1. Оптимизация распределения задач<br>2. Система кросс-функциональных проектов |
| **Отдел HR**                     | Самый высокий процент оттока (45%)                                     | 1. Программа нематериальной мотивации<br>2. Ротация функций внутри отдела HR |

---

## Общий вывод

В рамках проекта были решены две задачи:

1. **Предсказание уровня удовлетворённости сотрудника**  
   Модель обучена и достигла SMAPE 13.6. Выявлены ключевые факторы, влияющие на удовлетворённость, включая оценку руководителя, стаж, наличие повышения и нарушения. Эти факторы предложено использовать для внутренних программ удержания сотрудников.

2. **Предсказание факта увольнения**  
   Модель классификации достигла ROC-AUC 0.93. Составлен портрет сотрудника с высоким риском увольнения. На основе анализа даны конкретные рекомендации по HR-политике и мотивации.

**Обе модели могут быть внедрены в HR-систему для мониторинга и раннего предупреждения оттока сотрудников.**
